 <!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex" />

  <title>Tilpasninger ved behov – beinpress</title>

  <style>
    :root{
      --myss_blue_dark:#0c2d48;
      --myss_blue:#2f7fbf;
      --bg:#f6f9fc;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --shadow: 0 10px 25px rgba(2, 6, 23, 0.08);
      --radius: 18px;

      --orange_rgb: 242 140 40;
      --yellow_rgb: 255 214 10;
      --focus: rgba(47,127,191,.35);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    html{ scroll-behavior:smooth; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 500px at 20% -10%, rgba(47,127,191,0.18), transparent 55%),
        var(--bg);
      color:var(--text);
    }

    button{ font: inherit; min-height:44px; }

    .wrap{
      max-width: 860px;
      margin: 0 auto;
      padding: 18px 14px 28px;
    }

    .card{
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px;
      border: 1px solid rgba(15, 23, 42, 0.06);
    }

    h1{
      margin: 0 0 8px;
      font-size: clamp(1.4rem, 4vw, 2rem);
      line-height: 1.2;
      color: var(--myss_blue_dark);
      letter-spacing: -0.02em;
    }

    .ingress{
      margin: 0 0 18px;
      color: var(--muted);
      font-size: 1rem;
      line-height: 1.45;
    }

    .closing{
      margin-top: 18px;
      color: var(--muted);
      line-height: 1.5;
    }

    .adapt{ margin-top:14px; }

    .adapt__panel{
      margin-top:12px;
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:16px;
    }

    .adapt__lead{ margin:0 0 12px; color: var(--muted); }

    .adapt__controls{
      display:flex;
      gap:10px;
      justify-content:flex-start;
      flex-wrap:wrap;
      margin: 10px 0 6px;
    }

    .adapt__chip{
      border:1px solid rgba(15,23,42,.12);
      background:#fff;
      border-radius:999px;
      padding:8px 12px;
      font-weight:800;
      cursor:pointer;
      color: var(--myss_blue_dark);
    }

    .adapt__chip--ghost{
      background:transparent;
      color: var(--muted);
    }

    .adapt__chip:focus-visible,
    .adapt__option:focus-visible,
    .side-selected__change:focus-visible,
    .bodymap__btn:focus-visible{
      outline:3px solid var(--focus);
      outline-offset:3px;
    }

    .adapt__status{
      margin: 12px 0 8px;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(var(--orange_rgb), .14);
      border: 1px solid rgba(var(--orange_rgb), .25);
      color: var(--myss_blue_dark);
      font-weight: 900;
    }

    .adapt__toast{
      margin: 10px 0 0;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(148,163,184,.18);
      border: 1px solid rgba(148,163,184,.35);
      color: var(--myss_blue_dark);
      font-weight: 800;
      text-align:center;
    }

    .choice-badge{
      margin: 12px 0 0;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid rgba(var(--orange_rgb), .35);
      background: linear-gradient(
        90deg,
        rgba(var(--orange_rgb), .26),
        rgba(var(--yellow_rgb), .16)
      );
      color: var(--myss_blue_dark);
      font-weight: 950;
      text-align: center;
      opacity: 0;
    }

    .choice-badge.is-show{
      animation: badgeInOut 4200ms ease forwards;
    }

    @keyframes badgeInOut{
      0%   { opacity:0; transform: translateY(6px); }
      14%  { opacity:1; transform: translateY(0); }
      74%  { opacity:1; transform: translateY(0); }
      100% { opacity:0; transform: translateY(-2px); }
    }

    .fade-text{
      animation: textIn 260ms ease;
    }

    @keyframes textIn{
      0%   { opacity:0; transform: translateY(4px); }
      100% { opacity:1; transform: translateY(0); }
    }

    .adapt__h3{ margin:14px 0 8px; color: var(--myss_blue_dark); font-size:1rem; }

    .adapt__grid{
      display:grid;
      gap:10px;
    }

    .adapt__option{
      text-align:left;
      border:1px solid rgba(15,23,42,.12);
      border-radius:14px;
      padding:12px;
      background:#fff;
      cursor:pointer;
    }

    .adapt__option:hover{ border-color: rgba(47,127,191,.35); }

    .adapt__option[aria-pressed="true"]{
      border-color: rgba(47,127,191,.75);
      box-shadow: inset 0 0 0 1px rgba(47,127,191,.45);
      background: rgba(47,127,191,.08);
    }

    .adapt__t{ display:block; font-weight:900; color: var(--myss_blue_dark); }
    .adapt__d{ display:block; margin-top:3px; color: var(--muted); font-size:.95rem; }

    .adapt__option--neutral{ background: rgba(var(--orange_rgb), .08); }

    .adapt__privacy{ margin:14px 0 0; color: var(--muted); font-size:.9rem; }

    .side-selected{
      margin-top: 12px;
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(var(--orange_rgb), .35);
      background: rgba(var(--orange_rgb), .10);
    }

    .side-selected__text{
      margin: 0 0 10px;
      font-weight: 950;
      color: var(--myss_blue_dark);
    }

    .side-selected__figure{
      max-width: 420px;
      margin: 0 auto;
      border-radius: 18px;
      overflow: hidden;
      box-shadow: var(--shadow);
    }

    .side-selected__figure img{
      width:100%;
      height:auto;
      display:block;
    }
    /* MYSS ADAPT TIPS */
    .side-selected__change{
      margin-top: 10px;
      border: 1px solid rgba(15,23,42,.12);
      background: #fff;
      border-radius: 999px;
      padding: 10px 12px;
      font-weight: 900;
      cursor: pointer;
      color: var(--myss_blue_dark);
    }

    .adapt__tips{
      margin-top: 14px;
      display: grid;
      gap: 10px;
    }

    .tip{
      border: 1px solid rgba(15,23,42,.1);
      border-radius: 14px;
      padding: 12px;
      background: #fff;
    }

    .tip h3{
      margin: 0 0 8px;
      color: var(--myss_blue_dark);
    }

    .tip ul{
      margin: 0;
      padding-left: 18px;
      line-height: 1.5;
    }

    .tip p{
      margin: 0 0 10px;
      line-height: 1.5;
    }

    .tip .muted{
      color: var(--muted);
    }

    .tip details{
      margin-top: 10px;
      border: 1px solid rgba(15,23,42,.10);
      border-radius: 12px;
      background: rgba(47,127,191,.03);
      overflow: hidden;
    }

    .tip summary{
      list-style: none;
      cursor: pointer;
      padding: 10px 12px;
      font-weight: 950;
      color: var(--myss_blue_dark);
    }

    .tip summary::-webkit-details-marker{ display: none; }

    .tip details[open] .details__content{
      animation: detailsIn 260ms ease;
    }

    @keyframes detailsIn{
      0%{ opacity: 0; transform: translateY(4px); }
      100%{ opacity: 1; transform: translateY(0); }
    }

    .details__content{
      padding: 10px 12px 12px;
    }

    .details__content h4{
      margin: 12px 0 6px;
      color: var(--myss_blue_dark);
      font-size: .98rem;
    }

    .details__content ol,
    .details__content ul{
      margin: 0 0 10px;
      padding-left: 18px;
      line-height: 1.5;
    }

    .aid-list{
      display: grid;
      gap: 10px;
      margin-top: 10px;
    }

    .aid-item{
      border: 1px solid rgba(15,23,42,.08);
      border-radius: 12px;
      padding: 10px;
      background: #fff;
    }

    .aid-item strong{
      display: block;
      color: var(--myss_blue_dark);
      margin-bottom: 4px;
    }

    .tip__linkrow{
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .tip__linkpill{
      display: inline-block;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(15,23,42,.12);
      background: #fff;
      color: var(--myss_blue_dark);
      font-weight: 900;
      text-decoration: none;
    }

    .tip__linkpill:focus-visible{
      outline: 3px solid rgba(47,127,191,.35);
      outline-offset: 3px;
    }

    .tip[hidden]{ display: none; }

    .tip--selected{
      border-color: rgba(var(--orange_rgb), .90);
      box-shadow: 0 0 0 6px rgba(var(--orange_rgb), .18), var(--shadow);
      background: rgba(var(--orange_rgb), .06);
    }

    .tip--ping{
      animation: tipPing 2600ms ease;
    }

    @keyframes tipPing{
      0%{ background: rgba(var(--orange_rgb), 0); box-shadow: 0 0 0 0 rgba(var(--orange_rgb), 0); }
      10%{ background: rgba(var(--orange_rgb), .24); box-shadow: 0 0 0 8px rgba(var(--orange_rgb), .20); }
      70%{ background: rgba(var(--orange_rgb), .18); box-shadow: 0 0 0 8px rgba(var(--orange_rgb), .14); }
      100%{ background: rgba(var(--orange_rgb), 0); box-shadow: 0 0 0 0 rgba(var(--orange_rgb), 0); }
    }

    .bodymap{
      max-width: 560px;
      margin: 10px auto 0;
    }

    .bodymap__btn{
      display: block;
      width: 100%;
    }

    .bodymap__img{
      width:100%;
      height:auto;
      display:block;
      border-radius:18px;
    }

    .adapt__smallhint{
      margin: 8px 0 0;
      color: var(--muted);
      font-size: .95rem;
      text-align: center;
    }

    @media (min-width: 720px){
      .adapt__grid{ grid-template-columns: 1fr 1fr; }
      .adapt__option--neutral{ grid-column: 1 / -1; }
    }

    @media (prefers-reduced-motion: reduce){
      html{ scroll-behavior:auto; }
      .tip--ping{ animation:none; }
      .fade-text{ animation:none; }
      .choice-badge.is-show{ animation:none; opacity:1; }
    }
  </style>
</head>

<body>
  <main class="wrap">
    <section class="card">
      <h1>Tilpasninger ved behov: beinpress</h1>
      <p class="ingress">
Her får du rask, apparatnær tilpasning for beinpress. Målet er en konkret oppskrift som fungerer i et vanlig treningssenter, også når dagsformen varierer.
      </p>

      <section class="adapt" aria-labelledby="adaptTitle">
        <div id="adaptPanel" class="adapt__panel">
          <h2 id="adaptTitle">Tilpasset veiledning</h2>
          <p class="adapt__lead">Velg det som passer best. Valget brukes bare til å vise relevant veiledning nå, og det lagres ikke.</p>

          <div class="adapt__controls" role="group" aria-label="Filterkontroller">
            <button id="adaptShowAll" class="adapt__chip" type="button">Vis alt</button>
            <button id="adaptReset" class="adapt__chip adapt__chip--ghost" type="button">Nullstill</button>
          </div>

          <p id="adaptStatus" class="adapt__status" aria-live="polite">Vis alle tips</p>
          <p id="adaptToast" class="adapt__toast" hidden role="status" aria-live="polite"></p>

          <section id="step1" class="adapt__group" aria-label="Sidevalg">
            <h3 class="adapt__h3">Hvilken side påvirkes mest</h3>

            <div id="sideChoices" class="adapt__grid" role="group">
              <button class="adapt__option" type="button" data-side="right" aria-pressed="false">
                <span class="adapt__t">Mest på høyre side</span>
                <span class="adapt__d">Vi viser tips for høyre side</span>
              </button>

              <button class="adapt__option" type="button" data-side="left" aria-pressed="false">
                <span class="adapt__t">Mest på venstre side</span>
                <span class="adapt__d">Vi viser tips for venstre side</span>
              </button>

              <button class="adapt__option adapt__option--neutral" type="button" data-side="general" aria-pressed="false">
                <span class="adapt__t">Usikker</span>
                <span class="adapt__d">Vis generell tilrettelegging</span>
              </button>
            </div>

            <div id="sideSelected" class="side-selected" hidden aria-live="polite">
              <p id="sideSelectedText" class="side-selected__text"></p>

              <div class="side-selected__figure">
                <img id="sideSelectedImg" src="/assets/img/unilateral.jpg" alt="Unilateral figur" loading="lazy" />
              </div>

              <button id="changeSide" class="side-selected__change" type="button">Velg på nytt</button>
            </div>
          </section>

          <section id="step2" class="adapt__group" hidden aria-label="Kroppsområde">
            <h3 class="adapt__h3">Hva er mest utfordrende</h3>

            <div class="bodymap" aria-label="Trykk på området i figuren for å få relevante tips">
              <button id="bodymapBtn" class="bodymap__btn" type="button" aria-label="Velg område i figuren">
                <img id="bodymapImg" class="bodymap__img" src="/assets/img/Beinpress_figur.jpg" alt="Figur for valg av område" loading="lazy" />
              </button>
              <p class="adapt__smallhint">Trykk på et område i figuren. Du blir sendt til riktig tips.</p>
            </div>
          </section>

          <p class="adapt__privacy">Valget brukes bare til å tilpasse veiledningen nå. Det lagres ikke som helseopplysninger.</p>
        </div>

        <p id="choiceBadge" class="choice-badge" hidden role="status" aria-live="polite"></p>

        <section id="tipsContainer" class="adapt__tips" aria-live="polite">
          <article class="tip" data-side="general" data-area="general">
            <h3>Trygg og enkel start</h3>
            <ul>
              <li>Start med lett belastning og kort bevegelse.</li>
              <li>Hold rolig tempo og stopp før det blir utrygt.</li>
            </ul>
          </article>

          <article class="tip" data-side="right" data-area="general">
            <h3>Når høyre side jobber mindre</h3>
            <ul>
              <li>Reduser belastning og jobb med kontrollert tempo.</li>
              <li>Plasser foten likt og bruk pause i bunn.</li>
            </ul>
          </article>

          <article class="tip" data-side="left" data-area="general">
            <h3>Når venstre side jobber mindre</h3>
            <ul>
              <li>Samme prinsipp: lavere belastning, mer kontroll.</li>
              <li>Hold knær i samme retning gjennom hele presset.</li>
            </ul>
          </article>

          <article id="tip-foot" class="tip" data-side="general" data-area="foot">
            <h3>Ved utfordringer i fot</h3>
            <ul>
              <li>Flytt fotplassering litt opp eller ned for bedre støtte.</li>
              <li>Sikre jevnt trykk gjennom hele foten.</li>
            </ul>
          </article>

          <article id="tip-knee" class="tip" data-side="general" data-area="knee">
            <h3>Ved utfordringer i kne</h3>
            <ul>
              <li>La knær følge samme retning som tær gjennom presset.</li>
              <li>Reduser dybden hvis det gir bedre kontroll.</li>
            </ul>
          </article>

          <article id="tip-hip" class="tip" data-side="general" data-area="hip">
            <h3>Ved utfordringer i hofte og sete</h3>
            <ul>
              <li>Juster sete slik at rygg og sete har stabil kontakt.</li>
              <li>Bruk rolig tempo og jevn kraft uten raske stopp.</li>
            </ul>
          </article>

          <article id="tip-head" class="tip" data-side="general" data-area="head">
            <h3>Fokus og kontroll når det blir mye å holde styr på</h3>
            <ul>
              <li>Bruk få, faste steg: sete, fot, pust, press.</li>
              <li>Ta pause mellom repetisjonene og senk tempo.</li>
              <li>Bruk en kort huskeregel på skjermen.</li>
            </ul>
          </article>

          <article id="tip-grip" class="tip" data-side="general" data-area="grip">
            <h3>Grep når håndkontroll er utfordrende</h3>

            <p>
              Et godt grep hjelper deg å sitte stødig i beinpressen. Hvis den ene siden er mer påvirket, eller armen på den siden ikke rekker like langt, kan den sterke hånden lett dra deg litt skjevt. Prøv å holde så likt som mulig med begge hender, slik at overkroppen er rolig og begge bein får jobbe mest mulig likt.
            </p>

            <ul>
              <li>Prioriter stabil posisjon før belastning.</li>
              <li>Hold så symmetrisk som mulig med begge hender.</li>
              <li>Vurder stropp, antiskli eller tykkere grep ved behov.</li>
            </ul>

            <details>
              <summary>Vis mer forklaring</summary>
              <div class="details__content">
                <p>
                  Hvis du har en side som er svakere eller stivere, kan det være vanskeligere å nå håndtaket godt på den siden. Da blir det lett slik at den sterke hånden får mest tak og drar mer i håndtaket.
                </p>
                <p>
                  Da kan overkroppen vri seg, bekkenet komme litt ut av midtstilling, og det sterke beinet ta mer av vekten. Når du finner et grep som kjennes mest mulig likt på begge sider, blir det lettere å sitte rett i setet, bruke begge bein mer jevnt og oppleve øvelsen som mer forutsigbar og rolig.
                </p>
              </div>
            </details>

            <details>
              <summary>Hjelpemidler til grep</summary>
              <div class="details__content">
                <h4>1 Hjelpemidler du kan låne i resepsjonen</h4>
                <p>
                  På dette treningssenteret finnes det noen enkle hjelpemidler som kan gjøre det lettere å holde håndtaket, slik at du sitter mer stabilt og får en roligere gjennomføring.
                </p>

                <h4>Slik bruker du dem</h4>
                <ol>
                  <li>Se i oversikten under hvilket hjelpemiddel som kan passe for deg.</li>
                  <li>Gå til resepsjonen og si nummeret på hjelpemiddelet.</li>
                  <li>Du låner hjelpemiddelet til økten og leverer det tilbake i resepsjonen etterpå.</li>
                </ol>

                <h4>Eksempel på oversikt du kan fylle ut selv</h4>
                <div class="aid-list">
                  <div class="aid-item">
                    <strong>Nummer 01</strong>
                    <div>Navn: Grepstropp til håndtak</div>
                    <div class="muted">Brukes når: Det er vanskelig å holde godt med den ene hånden, eller grepet slipper lett.</div>
                  </div>

                  <div class="aid-item">
                    <strong>Nummer 02</strong>
                    <div>Navn: Antiskli greppute</div>
                    <div class="muted">Brukes når: Hånden glir på håndtaket, eller du trenger mer friksjon for å holde rolig.</div>
                  </div>

                  <div class="aid-item">
                    <strong>Nummer 03</strong>
                    <div>Navn: Myk grepstøtte til håndtak</div>
                    <div class="muted">Brukes når: Du har vondt i hånd eller håndledd, eller trenger et tykkere og mer behagelig grep.</div>
                  </div>
                </div>

                <p class="muted">
                  Du kan utvide listen med flere grepshjelpemidler, så lenge hvert hjelpemiddel har et tydelig nummer, et enkelt navn og en kort forklaring på når det brukes.
                </p>

                <h4>2 Hjelpemidler du kan kjøpe selv</h4>
                <p>
                  Noen grepshjelpemidler er vanlige treningsprodukter som du kan kjøpe selv, uten søknad. For eksempel:
                </p>
                <ul>
                  <li>grepstropper og andre grepshjelpemidler til håndtak</li>
                  <li>grepputer eller antiskliinnlegg for bedre friksjon</li>
                  <li>treningshansker med bedre grep</li>
                  <li>flytende kalk dersom senteret tillater det</li>
                  <li>skumrør eller grepstrekk for tykkere og mer behagelig håndtak</li>
                </ul>

                <p>
                  Spør i resepsjonen hvis du vil vite hva senteret anbefaler, om noe kan bestilles via senteret, eller hvor du kan kjøpe tilsvarende produkter.
                </p>

                <p class="muted">
                  Sikkerhet: Bruk hjelpemidler slik at du fortsatt kan slippe raskt. Stopp hvis du får smerter, nummenhet, hudirritasjon eller økt ubehag, og be om hjelp ved behov.
                </p>

                <h4>3 Individuelle hjelpemidler som er behovsprøvd</h4>
                <p>
                  Noen hjelpemidler er personlige og må vurderes faglig. Det kan for eksempel være:
                </p>
                <ul>
                  <li>håndleddsortose eller annen støtte for håndledd</li>
                  <li>tommelortose ved smerter eller ustabilitet</li>
                  <li>tilpasset gripehjelpemiddel ved redusert fingerfunksjon</li>
                  <li>spesialtilpasset hanske eller grepsløsning etter faglig vurdering</li>
                </ul>

                <p>
                  Disse hjelpemidlene er behovsprøvde. Det betyr at behovet må vurderes, og at det som regel må sendes en søknad til Nav.
                </p>

                <p>
                  Du kan ta direkte kontakt med et ortopediteknisk verksted hvis du ønsker mer informasjon eller vil bestille time til vurdering. Verkstedet kan veilede om aktuelle løsninger og hva som kreves av dokumentasjon. For ortoser fylles søknad første gang vanligvis ut av sykehuslege eller legespesialist og sendes via ortopediteknisk verksted med rammeavtale med Nav. Ved senere behov kan verkstedet ofte bistå med videre prosess.
                  <a href="https://www.nav.no/ortoser" target="_blank" rel="noopener">Nav: ortoser</a>
                </p>

                <p>
                  Ergoterapeut eller fysioterapeut i kommunen kan også være en god inngang, særlig hvis du trenger funksjonskartlegging, utprøving eller vurdering av andre hjelpemidler som går via Nav Hjelpemiddelsentral.
                </p>

                <p class="muted">
                  Oversikt over leverandører i Bergen og omegn for ortopediske sko finner du hos Nav:
                  <a href="https://www.nav.no/ortopediskesko" target="_blank" rel="noopener">Nav: ortopediske sko</a>
                </p>
              </div>
            </details>

            <details>
              <summary>For fagpersoner</summary>
              <div class="details__content">
                <p>
                  Hjelpemidler som lånes i resepsjonen er ment som generelle treningshjelpemidler og erstatter ikke behovsprøvd individuelt utstyr. Målet er å gjøre grepet mer stabilt, redusere kompensasjon og bidra til roligere gjennomføring i apparatet.
                </p>

                <h4>Når du bør vurdere videre utredning</h4>
                <ul>
                  <li>ved vedvarende smerter i hånd, tommel eller håndledd</li>
                  <li>ved tydelig instabilitet, feilbelastning eller økende overaktivitet ved grep</li>
                  <li>ved hudproblemer, trykkmerker eller risiko for sår</li>
                  <li>ved stor sideforskjell som gir rotasjon i overkropp og skjev belastning</li>
                  <li>når enkle tiltak ikke gir tilstrekkelig kontroll eller trygghet</li>
                </ul>

                <h4>Praktisk tilnærming i økt</h4>
                <ul>
                  <li>start med lav belastning og test grep og posisjon før du øker vekten</li>
                  <li>prioriter symmetrisk støtte og rolig overkropp før fokus på kraft</li>
                  <li>velg tiltak som gir stabilitet uten å låse hånden unødvendig</li>
                  <li>vurder stropp, antiskli eller tykkere grep når det gir roligere overkropp og jevnere beinbruk</li>
                </ul>

                <h4>Samarbeid og videre tiltak</h4>
                <p>
                  Ved tydelig behov for ortoser, spesialtilpasning eller vedvarende smerte anbefales utredning via kommunal ergoterapi eller fysioterapi, og eventuelt ortopediteknisk verksted. Ortopediteknisk verksted kan også kontaktes direkte for vurdering og veiledning, spesielt når ortose vurderes.
                </p>

                <h4>Dokumentasjon som er nyttig</h4>
                <ul>
                  <li>hva som ble observert, for eksempel rotasjon, skjev bekkenstilling eller ulikt grep</li>
                  <li>hvilke tiltak som ble prøvd, og hvilken effekt det hadde på kontroll og trygghet</li>
                  <li>eventuelle smerter, hudreaksjoner eller tegn på overbelastning</li>
                </ul>

                <p>
                  NFC veiledningen kan brukes som supplement til faglig oppfølging og som konkret støtte for å prøve ut tryggere utgangsstilling og mer forutsigbar belastning i apparatet.
                </p>
              </div>
            </details>

            <div class="tip__linkrow">
              <a class="tip__linkpill" href="/veiledere/beinpress-grep.html">For veiledere</a>
            </div>
          </article>

    </section>
  </main>

  <script>
  (function(){
    const status = document.getElementById('adaptStatus');
    const toast = document.getElementById('adaptToast');
    const badge = document.getElementById('choiceBadge');

    const sideChoices = document.getElementById('sideChoices');
    const sideSelected = document.getElementById('sideSelected');
    const sideSelectedText = document.getElementById('sideSelectedText');
    const changeSide = document.getElementById('changeSide');

    const step2 = document.getElementById('step2');

    const showAllBtn = document.getElementById('adaptShowAll');
    const resetBtn = document.getElementById('adaptReset');

    const bodymapBtn = document.getElementById('bodymapBtn');
    const bodymapImg = document.getElementById('bodymapImg');

    const tipsContainer = document.getElementById('tipsContainer');
    const tips = Array.from(document.querySelectorAll('.tip'));
    const sideButtons = sideChoices ? Array.from(sideChoices.querySelectorAll('button[data-side]')) : [];

    const originalOrder = tips.slice();

    let selectedSide = null;
    let selectedArea = null;
    let sideTimer = null;
    let toastTimer = null;
    let badgeTimer = null;

    const points = [
      { key:'head', x:0.50, y:0.13, target:'#tip-head', label:'Fokus og kontroll' },
      { key:'grip', x:0.18, y:0.55, target:'#tip-grip', label:'Grep' },
      { key:'hip',  x:0.69, y:0.60, target:'#tip-hip',  label:'Hofte og sete' },
      { key:'knee', x:0.72, y:0.76, target:'#tip-knee', label:'Kne' },
      { key:'foot', x:0.50, y:0.94, target:'#tip-foot', label:'Fot' }
    ];

    function bumpFade(el){
      if (!el) return;
      el.classList.remove('fade-text');
      void el.offsetWidth;
      el.classList.add('fade-text');
    }

    function setStatus(text){
      if (status) status.textContent = text;
      bumpFade(status);
    }

    function showToast(msg){
      if (!toast) return;
      toast.textContent = msg;
      toast.hidden = false;
      bumpFade(toast);
      clearTimeout(toastTimer);
      toastTimer = setTimeout(() => { toast.hidden = true; }, 2200);
    }

    function showBadge(text){
      if (!badge) return;
      badge.textContent = text;
      badge.hidden = false;

      badge.classList.remove('is-show');
      void badge.offsetWidth;
      badge.classList.add('is-show');

      clearTimeout(badgeTimer);
      badgeTimer = setTimeout(() => {
        if (badge) badge.hidden = true;
      }, 4600);
    }

    function ping(el){
      el.classList.remove('tip--ping');
      void el.offsetWidth;
      el.classList.add('tip--ping');
      setTimeout(() => el.classList.remove('tip--ping'), 2600);
    }

    function markSelectedTip(el){
      tips.forEach(t => t.classList.remove('tip--selected'));
      if (!el) return;
      el.classList.add('tip--selected');
      bumpFade(el);
    }

    function scrollToEl(el){
      if (!el) return;
      el.scrollIntoView({ behavior:'smooth', block:'start' });
    }

    function scrollToSel(sel){
      const el = document.querySelector(sel);
      if (!el) return;
      el.scrollIntoView({ behavior:'smooth', block:'start' });
      markSelectedTip(el);
      ping(el);
    }

    function nearestPoint(nx, ny){
      let best = points[0];
      let bestD = Infinity;
      for (const p of points){
        const dx = nx - p.x;
        const dy = ny - p.y;
        const d = dx*dx + dy*dy;
        if (d < bestD){ bestD = d; best = p; }
      }
      return best;
    }

    function sideLabel(v){
      if (v === 'right') return 'høyre side';
      if (v === 'left') return 'venstre side';
      return 'usikker';
    }

    function areaLabel(key){
      const p = points.find(x => x.key === key);
      return p ? p.label : key;
    }

    function statusText(){
      if (!selectedSide) return 'Vis alle tips';
      if (!selectedArea) return 'Valgt: ' + sideLabel(selectedSide) + '. Vent litt, så kommer figur 2';
      return 'Valgt: ' + sideLabel(selectedSide) + '. Område: ' + areaLabel(selectedArea);
    }

    function setPressed(list, matchFn){
      list.forEach(btn => {
        const on = matchFn(btn);
        btn.setAttribute('aria-pressed', on ? 'true' : 'false');
      });
    }

    function restoreTipOrder(){
      if (!tipsContainer) return;
      originalOrder.forEach(el => tipsContainer.appendChild(el));
    }

    function moveTipToTop(el){
      if (!tipsContainer || !el) return;
      tipsContainer.insertBefore(el, tipsContainer.firstElementChild);
    }

    function reorderTips(){
      restoreTipOrder();

      if (selectedSide){
        const sideTip = tipsContainer.querySelector('.tip[data-side="' + selectedSide + '"][data-area="general"]');
        moveTipToTop(sideTip);
      }

      if (selectedArea){
        const areaTip = document.getElementById('tip-' + selectedArea) || tipsContainer.querySelector('.tip[data-area="' + selectedArea + '"]');
        moveTipToTop(areaTip);
      }
    }

    function applyFilter(){
      tips.forEach(t => {
        const tSide = t.getAttribute('data-side') || 'general';
        const tArea = t.getAttribute('data-area') || 'general';

        const sideOk = !selectedSide || tSide === selectedSide || tSide === 'general';
        const areaOk = !selectedArea || tArea === selectedArea || tArea === 'general';

        t.hidden = !(sideOk && areaOk);
      });
    }

    function clearSideTimer(){
      if (!sideTimer) return;
      clearTimeout(sideTimer);
      sideTimer = null;
    }

    function showStep2(){
      if (step2) step2.hidden = false;
      setStatus(selectedArea ? statusText() : ('Valgt: ' + sideLabel(selectedSide) + '. Velg område i figur 2'));
      scrollToEl(step2);
    }

    function selectSide(v){
      clearSideTimer();

      selectedSide = v;
      selectedArea = null;

      setPressed(sideButtons, (b) => b.getAttribute('data-side') === v);

      if (toast) toast.hidden = true;

      if (sideChoices) sideChoices.hidden = true;

      if (sideSelected){
        sideSelected.hidden = false;
        if (sideSelectedText){
          sideSelectedText.textContent = 'Du har valgt: ' + sideLabel(v);
          bumpFade(sideSelectedText);
        }
      }

      if (step2) step2.hidden = true;

      reorderTips();
      applyFilter();

      setStatus(statusText());
      showBadge('Du har valgt ' + sideLabel(v));

      const topTip = tipsContainer ? tipsContainer.querySelector('.tip') : null;
      markSelectedTip(topTip);

      scrollToEl(sideSelected);

      sideTimer = setTimeout(showStep2, 5000);
    }

    function selectAreaByPoint(p){
      selectedArea = p.key;

      reorderTips();
      applyFilter();

      setStatus(statusText());
      showBadge('Du har valgt ' + sideLabel(selectedSide) + ' → ' + p.label);

      scrollToSel(p.target);
    }

    function resetAll(){
      clearSideTimer();

      selectedSide = null;
      selectedArea = null;

      setPressed(sideButtons, () => false);

      if (toast) toast.hidden = true;
      if (badge) badge.hidden = true;

      if (sideSelected) sideSelected.hidden = true;
      if (sideChoices) sideChoices.hidden = false;
      if (step2) step2.hidden = true;

      restoreTipOrder();
      tips.forEach(t => {
        t.hidden = false;
        t.classList.remove('tip--selected');
      });

      setStatus('Vis alle tips');

      if (sideChoices) scrollToEl(sideChoices);
    }

    if (sideChoices){
      sideChoices.addEventListener('click', (e) => {
        const btn = e.target.closest('button[data-side]');
        if (!btn) return;
        selectSide(btn.getAttribute('data-side'));
      });
    }

    if (changeSide){
      changeSide.addEventListener('click', resetAll);
    }

    if (resetBtn){
      resetBtn.addEventListener('click', resetAll);
    }

    if (showAllBtn){
      showAllBtn.addEventListener('click', () => {
        selectedArea = null;
        reorderTips();
        applyFilter();

        const msg = selectedSide
          ? ('Valgt: ' + sideLabel(selectedSide) + '. Velg område i figur 2')
          : 'Vis alle tips';

        setStatus(msg);

        const topTip = tipsContainer ? tipsContainer.querySelector('.tip') : null;
        markSelectedTip(topTip);
      });
    }

    if (bodymapBtn && bodymapImg){
      bodymapBtn.addEventListener('click', (e) => {
        if (!selectedSide){
          showToast('Velg side først');
          return;
        }

        const rect = bodymapImg.getBoundingClientRect();
        const nx = (e.clientX - rect.left) / rect.width;
        const ny = (e.clientY - rect.top) / rect.height;
        if (nx < 0 || nx > 1 || ny < 0 || ny > 1) return;

        const p = nearestPoint(nx, ny);
        selectAreaByPoint(p);
      });
    }
  })();
  </script>
</body>
</html>
